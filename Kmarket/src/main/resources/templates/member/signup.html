<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/member_layout}">
    <main id="member" layout:fragment="main">
        <div class="signup">
            <nav>
                <h1>약관동의</h1>
            </nav>
            <form th:action="|@{/member/sign-up}/${type}|" method="post">
                <section>
                    <label><input type="checkbox" name="agree0" value="selectAll" onclick='selectAll(this)'>전체 동의</label>
                </section>
                <section>
                    <h3><span class="essential">(필수)</span> 케이마켓 이용약관</h3>
                    <textarea th:if="${type.equals('general')}" name="terms" th:text="${terms.terms}" readonly></textarea>
                    <textarea th:if="${type.equals('seller')}" name="terms" th:text="${terms.tax}" readonly></textarea>
                    <label><input type="checkbox" name="termsTerms">동의합니다.</label>
                </section>
                <section>
                    <h3><span class="essential">(필수)</span> 전자금융거래 이용약관</h3>
                    <textarea name="v" th:text="${terms.finance}" readonly></textarea>
                    <label><input type="checkbox" name="termsFinance">동의합니다.</label>
                </section>
                <section>
                    <h3><span class="essential">(필수)</span> 개인정보 수집동의</h3>
                    <textarea name="privacy" th:text="${terms.privacy}" readonly></textarea>
                    <label><input type="checkbox" name="termsPrivacy">동의합니다.</label>
                </section>
                <section>
                    <h3><span class="optional">(선택)</span> 위치정보 이용약관</h3>
                    <textarea name="location" th:text="${terms.location}" readonly></textarea>
                    <label><input type="checkbox" name="termsLocation">동의합니다.</label>
                </section>
                <input type="submit" class="agreeBtn" value="동의하기" onclick="nextBtn()">
            </form>
        </div>
    </main>
    <th:block layout:fragment="script">
        <script th:src="@{/js/selectAll.js}"></script>
        <script>
            function nextBtn(){
                let termsCheckBox = document.querySelector("input[name=termsTerms]");
                let financeCheckBox = document.querySelector("input[name=termsFinance]");
                let privacyCheckBox = document.querySelector("input[name=termsPrivacy]");

                if(!termsCheckBox.checked || !financeCheckBox.checked || !privacyCheckBox.checked){
                    alert('필수 이용약관에 동의해주세요.');
                    return false;
                }
            }
        </script>
    </th:block>
</html>